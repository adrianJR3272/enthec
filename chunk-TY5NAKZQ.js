import{a as j,c as Q,e as Y,i as K,j as X,k as q,m as J,o as Z,p as $}from"./chunk-XKSFK43D.js";import{$ as m,Aa as w,Ba as E,E as S,I as k,L as O,M as P,N as d,O as r,P as o,Q as y,T as U,V as h,X as _,_ as s,aa as g,ba as D,ca as M,da as x,ea as b,fa as B,ha as c,ia as p,l as A,oa as z,p as f,pa as F,qa as L,r as T,s as N,sa as W,u as C,ua as G,v as V,wa as H,y as v,z as n}from"./chunk-4UOZEBZE.js";var R=class a{http=f(W);getUserRepos(t){return this.http.get(`https://api.github.com/users/${t}/repos`)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=A({token:a,factory:a.\u0275fac,providedIn:"root"})};function re(a,t){if(a&1&&(r(0,"option",9),s(1),o()),a&2){let e=t.$implicit;d("value",e),n(),m(e)}}function oe(a,t){if(a&1&&(r(0,"div",14)(1,"h3"),s(2),o(),r(3,"p"),s(4),o(),r(5,"p"),s(6),o(),r(7,"p"),s(8),o(),r(9,"a",15),s(10),c(11,"translate"),o()()),a&2){let e=t.$implicit;n(2),m(e.name),n(2),m(e.description||"Sin descripci\xF3n"),n(2),g("Lenguaje: ",e.language||"N/A"),n(2),g("\u2B50 ",e.stargazers_count),n(),d("href",e.html_url,v),n(),g(" ",p(11,6,"REPOSITORIES.VIEW_ON_GITHUB")," ")}}function ae(a,t){if(a&1){let e=U();r(0,"div",10),k(1,oe,12,8,"div",11),o(),r(2,"div",12)(3,"button",13),h("click",function(){T(e);let u=_();return N(u.prevPage())}),s(4),c(5,"translate"),o(),r(6,"span"),s(7),c(8,"translate"),o(),r(9,"button",13),h("click",function(){T(e);let u=_();return N(u.nextPage())}),s(10),c(11,"translate"),o()()}if(a&2){let e=_();d("ngClass",e.animationClass),n(),d("ngForOf",e.paginatedRepos()),n(2),d("disabled",e.currentPage()===1),n(),g(" ",p(5,9,"REPOSITORIES.PAGINATION_PREV")," "),n(3),D(" ",p(8,11,"REPOSITORIES.PAGE")," ",e.currentPage()," / ",e.totalPages()," "),n(2),d("disabled",e.currentPage()===e.totalPages()),n(),g(" ",p(11,13,"REPOSITORIES.PAGINATION_NEXT")," ")}}function se(a,t){a&1&&(r(0,"div",8),s(1),c(2,"translate"),o()),a&2&&(n(),g(" ",p(2,1,"REPOSITORIES.NO_REPOS_FOUND")," "))}var I=class a{userName;repositories=[];pageSize=6;currentPage=C(1);pageDirection=C(null);searchQueryValue="";nameOrderValue="asc";starsOrderValue="asc";sortBy=C("name");order=C("asc");languageFilterValue="all";languages=[];animationClass="";isAnimating=C(!1);reposService=f(R);ngOnChanges(t){t.userName&&this.userName&&this.loadRepositories(this.userName)}onSearchChange(){this.currentPage.set(1)}loadRepositories(t){this.reposService.getUserRepos(t).subscribe({next:e=>{this.repositories=e,this.extractLanguages(),this.currentPage.set(1),this.pageDirection.set(null)},error:()=>{this.repositories=[],this.languages=[]}})}extractLanguages(){let t=this.repositories.map(e=>e.language).filter(Boolean);this.languages=Array.from(new Set(t))}filteredRepos(){let t=[...this.repositories];return this.searchQueryValue&&(t=t.filter(e=>e.name.toLowerCase().includes(this.searchQueryValue.toLowerCase()))),this.languageFilterValue!=="all"&&(t=t.filter(e=>e.language===this.languageFilterValue)),this.nameOrderValue&&t.sort((e,i)=>this.nameOrderValue==="asc"?e.name.localeCompare(i.name):i.name.localeCompare(e.name)),this.starsOrderValue&&t.sort((e,i)=>this.starsOrderValue==="asc"?e.stargazers_count-i.stargazers_count:i.stargazers_count-e.stargazers_count),t}paginatedRepos(){let t=(this.currentPage()-1)*this.pageSize;return this.filteredRepos().slice(t,t+this.pageSize)}totalPages(){return Math.ceil(this.filteredRepos().length/this.pageSize)}nextPage(){this.currentPage()<this.totalPages()&&!this.isAnimating()&&(this.triggerAnimation("next"),this.currentPage.update(t=>t+1))}prevPage(){this.currentPage()>1&&!this.isAnimating()&&(this.triggerAnimation("prev"),this.currentPage.update(t=>t-1))}triggerAnimation(t){this.animationClass=t==="next"?"slide-next":"slide-prev",this.isAnimating.set(!0),setTimeout(()=>{this.animationClass="",this.isAnimating.set(!1)},500)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-repositories"]],inputs:{userName:"userName"},features:[V],decls:25,vars:25,consts:[[1,"repositories-component"],[1,"filters"],["type","text",3,"ngModelChange","placeholder","ngModel"],[3,"ngModelChange","ngModel"],["value","asc"],["value","desc"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"no-results"],[3,"value"],[1,"repositories-grid",3,"ngClass"],["class","repo-card",4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],[1,"repo-card"],["target","_blank",3,"href"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"input",2),c(3,"translate"),b("ngModelChange",function(l){return x(i.searchQueryValue,l)||(i.searchQueryValue=l),l}),h("ngModelChange",function(){return i.onSearchChange()}),o(),r(4,"select",3),b("ngModelChange",function(l){return x(i.nameOrderValue,l)||(i.nameOrderValue=l),l}),r(5,"option",4),s(6),c(7,"translate"),o(),r(8,"option",5),s(9),c(10,"translate"),o()(),r(11,"select",3),b("ngModelChange",function(l){return x(i.starsOrderValue,l)||(i.starsOrderValue=l),l}),r(12,"option",4),s(13),c(14,"translate"),o(),r(15,"option",5),s(16),c(17,"translate"),o()(),r(18,"select",3),b("ngModelChange",function(l){return x(i.languageFilterValue,l)||(i.languageFilterValue=l),l}),r(19,"option",6),s(20),c(21,"translate"),o(),k(22,re,2,2,"option",7),o()(),O(23,ae,12,15)(24,se,3,3,"div",8),o()),e&2&&(n(2),d("placeholder",B(p(3,13,"REPOSITORIES.SEARCH_PLACEHOLDER"))),M("ngModel",i.searchQueryValue),n(2),M("ngModel",i.nameOrderValue),n(2),m(p(7,15,"REPOSITORIES.NAME_ASC")),n(3),m(p(10,17,"REPOSITORIES.NAME_DESC")),n(2),M("ngModel",i.starsOrderValue),n(2),m(p(14,19,"REPOSITORIES.STARS_ASC")),n(3),m(p(17,21,"REPOSITORIES.STARS_DESC")),n(2),M("ngModel",i.languageFilterValue),n(2),g(" ",p(21,23,"REPOSITORIES.ALL_LANGUAGES")," "),n(2),d("ngForOf",i.languages),n(),P(i.paginatedRepos().length>0?23:24))},dependencies:[L,z,F,E,J,X,q,j,K,Q,Y,w],styles:[".repositories-grid[_ngcontent-%COMP%]{padding:1rem;display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;transition:transform .5s ease;font-family:Inter,sans-serif}.repositories-grid.slide-next[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideNext .5s forwards}.repositories-grid.slide-prev[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slidePrev .5s forwards}@keyframes _ngcontent-%COMP%_slideNext{0%{transform:translate(100%);opacity:1}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slidePrev{0%{transform:translate(-100%);opacity:1}to{transform:translate(0);opacity:1}}.repo-card[_ngcontent-%COMP%]{border-radius:1rem;padding:1rem;display:flex;flex-direction:column;justify-content:flex-start;background-color:var(--repo-card-bg);color:var(--repo-card-color);box-shadow:0 2px 6px #0003;min-height:15rem;max-height:15rem;overflow-y:auto;overflow-x:hidden;transition:transform .3s ease}.repo-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#00f;margin-bottom:.5rem;font-size:1.2rem;font-weight:600}.repo-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex:1;font-size:.9rem;margin-bottom:.5rem}.repo-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0;font-size:.9rem}.repo-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline;margin-top:auto;color:#0b3d91;text-decoration:none;font-weight:500;cursor:pointer}.repo-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.repo-card[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.repo-card[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.repo-card[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0b3d91;border-radius:4px;transition:background-color .3s ease,box-shadow .2s ease;cursor:pointer}.repo-card[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#06276b;box-shadow:0 0 6px #06276bb3}.pagination[_ngcontent-%COMP%]{font-family:Inter,sans-serif;grid-column:1/-1;display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:2rem}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:500}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:.5rem;border:none;box-shadow:0 1px 4px #0003;cursor:pointer;font-weight:500;transition:background-color .2s,transform .2s}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0b3d91;color:#fff;transform:translateY(-2px)}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;padding:1rem}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:.5rem;border:none;font-family:Inter,sans-serif;font-weight:500;cursor:pointer;transition:background-color .2s,transform .2s,color .2s;background-color:var(--repo-card-bg);color:var(--repo-card-color)}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover, .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{cursor:pointer}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 200px}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:0 1 150px}.filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:var(--repo-card-color)}.no-results[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:2rem;font-weight:500;text-align:center;padding:3rem 1rem 2rem;color:var(--repo-card-color)}@media (max-width: 756px){.repositories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;width:100%;gap:1rem;padding:0 1rem;box-sizing:border-box}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:block;width:100%;flex:1 1 auto;box-sizing:border-box}}@media (max-width: 500px){.repositories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function le(a,t){if(a&1&&(r(0,"div",7),s(1),o()),a&2){let e=_();n(),m(e.user.bio)}}function ce(a,t){if(a&1&&y(0,"app-toast",10),a&2){let e=_();d("message",e.searchUserService.toast().message)("type",e.searchUserService.toast().type)}}var te=class a{user;router=f(H);route=f(G);searchUserService=f(Z);ngOnInit(){let t=history.state,e=this.route.snapshot.paramMap.get("username");t?.user?this.user=t.user:e?this.searchUserService.getUser(e).subscribe({next:i=>this.user=i,error:()=>this.user={}}):this.user={}}goBack(){this.router.navigate([""])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-user-detail"]],decls:15,vars:8,consts:[[1,"user-detail-component"],[1,"back-button",3,"click"],[1,"material-symbols-outlined"],[1,"cabecera"],[1,"avatar"],[3,"src"],[1,"user"],[1,"description"],[1,"repositories-container"],[3,"userName"],[3,"message","type"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"button",1),h("click",function(){return i.goBack()}),r(2,"span",2),s(3,"arrow_back"),o(),s(4),c(5,"translate"),o(),r(6,"div",3)(7,"div",4),y(8,"img",5),o(),r(9,"div",6),s(10),O(11,le,2,1,"div",7),o()(),r(12,"div",8),y(13,"app-repositories",9),o(),O(14,ce,1,2,"app-toast",10),o()),e&2&&(n(4),g(" ",p(5,6,"SEARCH.BACK_TO_SEARCH")," "),n(4),d("src",i.user.avatar_url,v),n(2),g(" ",i.user.login," "),n(),P(i.user.bio?11:-1),n(2),d("userName",i.user.login),n(),P(i.searchUserService.toast()?14:-1))},dependencies:[I,E,$,w],styles:[".user-detail-component[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;overflow-x:hidden}.user-detail-component[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{align-self:flex-start;margin:1rem;padding:.5rem 1rem;font-size:1rem;font-weight:500;border:none;border-radius:.5rem;background-color:#0b3d91;color:#fff;cursor:pointer;transition:background-color .2s,transform .2s;display:inline-flex;align-items:center;gap:.5rem}.user-detail-component[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#06276b;transform:translateY(-1px)}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]{display:flex;padding:2rem;flex-direction:row;gap:2rem;max-height:10rem;width:100%;align-items:center}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100px;height:100px;flex-shrink:0}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem;font-size:3rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 200px);width:100%}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem;overflow:hidden;text-overflow:ellipsis;max-width:calc(100% - 200px)}@media (max-width: 452px){.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:1rem;padding:1rem 0;margin:0 auto;width:100%}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-size:2rem;max-width:100%;white-space:normal}.user-detail-component[_ngcontent-%COMP%]   .cabecera[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{max-width:100%}}"]})};export{te as UserDetailComponent};
